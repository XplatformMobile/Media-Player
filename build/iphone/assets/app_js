function getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}function animateThumb(){for(i=0;i<5;i++)slider.thumbImage="/thumbAnimation/thumbanimation"+(i+1)+".png",setTimeout(function(){},100)}function thumbReverse(){for(i=5;i>0;i--)slider.thumbImage="/thumbAnimation/thumbanimation"+i+".png",setTimeout(function(){},100);slider.thumbImage="UIImages/thumb2.png"}function setTitle(){songTitle.text=songs[musicindex].title,nowPlayingInfo.setTitle(songs[musicindex].title),nowPlayingInfo.setArtist(songs[musicindex].artist),nowPlayingInfo.setPlaybackDuration(player.getDuration()),nowPlayingInfo.setArtwork("Img/"+songs[musicindex].image),songTitle.width=.6*Ti.Platform.displayCaps.platformWidth,songTitle.height=30,albumImage.image="Img/"+songs[musicindex].image,artistTitle.text=songs[musicindex].artist,musicindex==Object.keys(songs).length-1?nextAlbumImage.image="Img/"+songs[0].image:nextAlbumImage.image="Img/"+songs[musicindex+1].image,0==musicindex?prevAlbumImage.image="Img/"+songs[Object.keys(songs).length-1].image:prevAlbumImage.image="Img/"+songs[musicindex-1].image}function createRandomPlaylist(){for(size=Object.keys(originalPlaylist).length,randomPlaylist=null,randomPlaylist=[],value=0,copyPlaylist=originalPlaylist.slice(),randomPlaylist[0]=copyPlaylist[musicindex],copyPlaylist.splice(musicindex,1),i=0;i<size-1;i++)value=Math.round(Math.random()*(Object.keys(copyPlaylist).length-1)),randomPlaylist.push(copyPlaylist[value]),copyPlaylist.splice(value,1);songs=null,songs=randomPlaylist}function nextSong(){musicindex==Object.keys(songs).length-1?(player.stop(),player=Ti.Media.createSound(songs[0].file),player.allowBackground=!0,player.setTime=0,player.play(),nowPlayingInfo.setPlaybackRate(1),addplayerEventListener(),playButton.backgroundImage="UIImages/pause.png",musicindex=0,setTitle()):(player.stop(),player=Ti.Media.createSound(songs[musicindex+1].file),player.allowBackground=!0,player.setTime=0,player.play(),nowPlayingInfo.setPlaybackRate(1),addplayerEventListener(),playButton.backgroundImage="UIImages/pause.png",musicindex+=1,setTitle())}function previous(){player.getTime()<5e3||!player.isPlaying()?0==musicindex?(player.stop(),player=Ti.Media.createSound(songs[Object.keys(songs).length-1].file),player.allowBackground=!0,player.setTime=0,player.play(),nowPlayingInfo.setPlaybackRate(1),addplayerEventListener(),playButton.backgroundImage="UIImages/pause.png",musicindex=Object.keys(songs).length-1,songTitle.text=songs[musicindex].title,setTitle()):(player.stop(),player=Ti.Media.createSound(songs[musicindex-1].file),player.allowBackground=!0,player.setTime=0,player.play(),nowPlayingInfo.setPlaybackRate(1),addplayerEventListener(),playButton.backgroundImage="UIImages/pause.png",musicindex-=1,songTitle.text=songs[musicindex].title,setTitle()):(player.stop(),player.play(),nowPlayingInfo.setPlaybackRate(1))}function convertToMinutes(e){return minutes=0,secondsf=0,0!=e&&(minutes=Math.round(e/60-e%60/60),secondsf=Math.round(e-60*minutes)),1==secondsf.toString().length?minutes+":0"+secondsf:minutes+":"+secondsf}function addplayerEventListener(){player.addEventListener("complete",function(e){musicindex<Object.keys(songs).length-1||1==repeat?nextSong():(musicindex=0,player=Ti.Media.createSound(songs[0].file),player.allowBackground=!0,playButton.backgroundImage="UIImages/play.png",songTitle.text=songs[0].title,setTitle()),clearInterval(nextinterval)})}Titanium.UI.setBackgroundColor("#000");var win1=Titanium.UI.createWindow({title:"Playing from songs",backgroundColor:"#606060"}),mediaControls=require("de.codewave.ti.mediacontrols"),mediaControlsView=mediaControls.createView({left:0,top:0,right:0,bottom:0}),nowPlayingInfo=mediaControls.createNowPlayingInfo();mediaControlsView.addEventListener("remoteControlPlay",function(){Titanium.API.info("Remote control 'play'."),player.play(),nowPlayingInfo.setPlaybackRate(1),playButton.backgroundImage="UIImages/pause.png"}),mediaControlsView.addEventListener("remoteControlPause",function(){Titanium.API.info("Remote control 'pause'."),playButton.backgroundImage="UIImages/play.png",player.pause(),nowPlayingInfo.setPlaybackRate(0)}),mediaControlsView.addEventListener("remoteControlStop",function(){Titanium.API.info("Remote control 'stop'."),player.stop(),nowPlayingInfo.clear()}),mediaControlsView.addEventListener("remoteControlPreviousTrack",function(){Titanium.API.info("Remote control 'previous track'."),previous()}),mediaControlsView.addEventListener("remoteControlNextTrack",function(){Titanium.API.info("Remote control 'next track'."),nextSong()});var randomPlaylist=[],originalPlaylist=[];originalPlaylist.push({title:"Bidolibido",artist:"Vintage Culture, Shapeless",file:{url:"songs/sound.wav"},image:"songs/bidolibido.png"}),originalPlaylist.push({title:"Running Wild (Project 46 Remix)",artist:"Morgan Page ft. The Oddictions, Britt Daley",file:{url:"songs/sound2.mp3"},image:"rw.png"}),originalPlaylist.push({title:"Hands to Myself (Ftampa Bootleg)",artist:"Selena Gomez",file:{url:"songs/sound3.mp3"},image:"Htm.png"}),originalPlaylist.push({title:"S.I.D.H.A.N.",artist:"FTampa",file:{url:"songs/SIDHAN.mp3"},image:"Sidhan.png"}),originalPlaylist.push({title:"Feels (KSHMR Remix)",artist:"Kiara",file:{url:"songs/Feels RMX.mp3"},image:"Feels.png"});var albumImage=Ti.UI.createImageView({image:"Img/bidolibido.png",width:.75*Ti.Platform.displayCaps.platformWidth,bottom:.63*Ti.Platform.displayCaps.platformWidth,borderColor:"black",borderWidth:1});albumImage.addEventListener("swipe",function(e){"left"==e.direction?nextSong():"right"==e.direction?previous():"down"==e.direction&&win1.close()});var backImage=Ti.UI.createImageView({image:"Img/background.png",width:Ti.Platform.displayCaps.platformWidth,height:Ti.Platform.displayCaps.platformHeight}),backSlider=Ti.UI.createImageView({image:"Img/slidebarback.png",left:32,bottom:174}),nextAlbumImage=Ti.UI.createImageView({image:"Img/bidolibido.png",width:.68*Ti.Platform.displayCaps.platformWidth,bottom:.66*Ti.Platform.displayCaps.platformWidth,right:"-60%",opacity:.5,borderColor:"black",borderWidth:1}),prevAlbumImage=Ti.UI.createImageView({image:"Img/bidolibido.png",width:.68*Ti.Platform.displayCaps.platformWidth,bottom:.66*Ti.Platform.displayCaps.platformWidth,left:"-60%",opacity:.5,borderColor:"black",borderWidth:1}),songs=originalPlaylist.slice(),playButton=Titanium.UI.createButton({title:"",bottom:20,height:80,width:80,backgroundImage:"UIImages/play.png"}),nextButton=Ti.UI.createButton({title:"",bottom:20,height:80,width:80,right:106,backgroundImage:"UIImages/next.png"}),prevButton=Ti.UI.createButton({title:"",bottom:20,height:80,width:80,left:107,backgroundImage:"UIImages/previous.png"}),repeatButton=Ti.UI.createButton({title:"",bottom:33,height:50,right:30,width:75,backgroundImage:"UIImages/repeat.png"});repeat=!1,repeatButton.addEventListener("click",function(e){0==repeat?(repeatButton.backgroundImage="UIImages/repeatactivate.png",repeat=!0):(repeatButton.backgroundImage="UIImages/repeat.png",repeat=!1)});var shuffleButton=Ti.UI.createButton({title:"",bottom:33,height:50,width:75,left:30,backgroundImage:"UIImages/shuffle.png"});shuffle=!1,shuffleButton.addEventListener("click",function(e){if(0==shuffle)createRandomPlaylist(),musicindex=0,shuffle=!0,shuffleButton.backgroundImage="UIImages/shuffleactivate.png",setTitle();else{for(already=!1,i=0;i<Object.keys(songs).length;i++)songs[musicindex].title==originalPlaylist[i].title&&0==already&&(musicindex=i,already=!0);songs=null,songs=originalPlaylist.slice(),shuffle=!1,shuffleButton.backgroundImage="UIImages/shuffle.png",setTitle()}});var musicindex=0,player=Titanium.Media.createSound({url:"songs/sound.wav",allowBackground:!0});Titanium.Media.audioSessionCategory=Titanium.Media.AUDIO_SESSION_CATEGORY_PLAYBACK,Titanium.Media.audioSessionMode=Titanium.Media.AUDIO_SESSION_MODE_PLAYBACK,player.allowBackground=!0,playButton.addEventListener("click",function(e){player.isPlaying()?(playButton.backgroundImage="UIImages/play.png",player.pause(),nowPlayingInfo.setPlaybackRate(0)):(playButton.backgroundImage="UIImages/pause.png",player.play(),nowPlayingInfo.setPlaybackRate(1))}),addplayerEventListener();var slider=Ti.UI.createSlider({bottom:150,min:0,max:100,width:"90%",thumbImage:"UIImages/thumb2.png",backgroundLeftCap:100,leftTrackImage:"UIImages/teste1.png",rightTrackImage:"UIImages/test6.png"}),label=Ti.UI.createLabel({text:"0",textAlign:"center",bottom:130,left:25,color:"white",font:{fontSize:14,fontFamily:"LiberationSerif"}}),songTitle=Ti.UI.createLabel({text:"Title",textAlign:"center",color:"white",bottom:125,font:{fontSize:18,fontFamily:"LiberationSerif"}}),artistTitle=Ti.UI.createLabel({text:"Artist",color:"white",textAlign:"center",bottom:110,font:{fontSize:12,fontFamily:"LiberationSerif"}}),remaining=Ti.UI.createLabel({text:"0:00",color:"white",textAlign:"center",bottom:130,right:25,font:{fontSize:14,fontFamily:"LiberationSerif"}}),touching=!1,lastPosition=0;time=setInterval(function(){label.text=convertToMinutes(Math.round(player.getTime()/1e3)),remaining.text="-"+convertToMinutes(Math.round(player.getDuration()-player.getTime()/1e3)),nowPlayingInfo.setElapsedPlaybackTime(Math.round(player.getTime()/1e3)),0==touching&&(slider.value=player.getTime()/(1e3*player.getDuration())*100),1==touching&&lastPosition!=slider.value&&(player.setTime(10*slider.value*player.getDuration()),lastPosition=slider.value)},200),nextButton.addEventListener("singletap",function(e){nextSong()}),prevButton.addEventListener("singletap",function(e){previous()}),nextinterval=0,nextButton.addEventListener("longpress",function(e){count=0,value=1e3,nextinterval=setInterval(function(){count>=10&&(value=1e4),1e3*player.getDuration()-player.getTime()>value?player.setTime(player.getTime()+value):(musicindex<Object.keys(songs).length-1||1==repeat?nextSong():(musicindex=0,player=Ti.Media.createSound(songs[0].file),player.allowBackground=!0,playButton.backgroundImage="UIImages/play.png",setTitle()),clearInterval(nextinterval)),count+=1},100)}),nextButton.addEventListener("touchend",function(e){clearInterval(nextinterval)}),previnterval=0,prevButton.addEventListener("longpress",function(e){count=0,value=1200,previnterval=setInterval(function(){count>=10&&(value=10200),player.getTime()>value?player.setTime(player.getTime()-value):player.setTime(0),count+=1},100)}),prevButton.addEventListener("touchend",function(e){clearInterval(previnterval)}),slider.addEventListener("touchend",function(e){touching=!1,thumbReverse()}),slider.addEventListener("touchstart",function(e){touching=!0,animateThumb()}),setTitle(),win1.add(mediaControlsView),win1.add(backImage),win1.add(label),win1.add(backSlider),win1.add(slider),win1.add(nextButton),win1.add(prevButton),win1.add(playButton),win1.add(remaining),win1.add(songTitle),win1.add(repeatButton),win1.add(shuffleButton),win1.add(nextAlbumImage),win1.add(prevAlbumImage),win1.add(albumImage),win1.add(artistTitle);var win2=Titanium.UI.createWindow({title:"Song list",backgroundColor:"#fff"}),listView=Ti.UI.createListView(),sections=[],section=Ti.UI.createListSection({}),musics=[];for(i=0;i<Object.keys(songs).length;i++)musics.push({properties:{title:songs[i].title}});section.setItems(musics),sections.push(section),listView.sections=sections,listView.addEventListener("itemclick",function(e){if(0==shuffle)musicindex2=e.itemIndex;else for(already=!1,i=0;i<Object.keys(songs).length;i++)songs[i].title==originalPlaylist[e.itemIndex].title&&0==already&&(musicindex2=i,already=!0);if(musicindex!=musicindex2){if(player.stop(),player=Ti.Media.createSound(songs[musicindex2].file),player.allowBackground=!0,player.setTime=0,player.play(),nowPlayingInfo.setPlaybackRate(1),addplayerEventListener(),playButton.backgroundImage="UIImages/pause.png",musicindex=musicindex2,setTitle(),1==shuffle){for(already=!1,i=0;i<Object.keys(songs).length;i++)songs[musicindex].title==originalPlaylist[i].title&&0==already&&(musicindex=i,already=!0);songs=null,songs=originalPlaylist.slice(),createRandomPlaylist(),musicindex=0}win3.openWindow(win1,{animated:!0})}else player.play(),nowPlayingInfo.setPlaybackRate(1),playButton.backgroundImage="UIImages/pause.png",win3.openWindow(win1,{animated:!0})}),win2.add(listView);var win3=Ti.UI.iOS.createNavigationWindow({window:win2});win3.open();var btnRight=Ti.UI.createButton({title:"Now Playing"});win2.setRightNavButton(btnRight),btnRight.addEventListener("click",function(e){win3.openWindow(win1,{animated:!0})}),function(){var e=require("ti.cloud"),t="production"===Ti.App.deployType.toLowerCase()?"production":"development",i=Ti.App.Properties.getString("acs-username-"+t),n=Ti.App.Properties.getString("acs-password-"+t);t&&i&&n&&e.Users.login({login:i,password:n},function(e){"development"===t&&(Ti.API.info("ACS Login Results for environment `"+t+"`:"),Ti.API.info(e)),e&&e.success&&e.users&&e.users.length?Ti.App.fireEvent("login.success",e.users[0],t):Ti.App.fireEvent("login.failed",e,t)})}();